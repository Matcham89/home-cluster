apiVersion: kiali.io/v1alpha1
kind: Kiali
metadata:
  name: kiali
  namespace: istio-system
spec:
  auth:
    strategy: openid
    openid:
      client_id: "B86FR4ySUv3u41K25pbnb9vCCbT4Z0RSLQP1xGw1"
      disable_rbac: true
      issuer_uri: "https://authentik.kubegit.com/application/o/kiali-kubegit-com/"
      api_token: "id_token"
      authentication_timeout: 3600
      scopes:
        - openid
        - email
        - profile
      username_claim: "preferred_username"
  deployment:
    logger:
      log_level: info
    view_only_mode: false
    resources:
      requests:
        cpu: 100m
        memory: 256Mi
      limits:
        cpu: 500m
        memory: 512Mi
  server:
    web_fqdn: kiali.kubegit.com
    web_root: /
    web_schema: https
    web_port: ""
  istio_namespace: istio-system
  version: default
  external_services:
    prometheus:
      url: http://kube-prometheus-stack-prometheus.monitoring.svc.cluster.local:9090
    grafana:
      auth:
        ca_file: ''
        insecure_skip_verify: true
        password: ''
        token: ''
        type: none
        use_kiali_token: false
        username: ''
      dashboards:
      - name: Istio Service Dashboard
        variables:
          datasource: var-datasource
          namespace: var-namespace
          service: var-service
          version: var-version
      - name: Istio Workload Dashboard
        variables:
          datasource: var-datasource
          namespace: var-namespace
          version: var-version
          workload: var-workload
      - name: Istio Mesh Dashboard
      - name: Istio Control Plane Dashboard
      - name: Istio Performance Dashboard
      - name: Istio Wasm Extension Dashboard
      datasource_uid: ''
      enabled: false
      external_url: ''
      health_check_url: ''
      internal_url: http://kube-prometheus-stack-grafana.monitoring.svc.cluster.local:80
      is_core: false