---
# Allow Kubernetes API server to call CNPG webhooks
# Required for validation and mutation webhooks
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-apiserver-webhook
spec:
  podSelector:
    matchLabels:
      app.kubernetes.io/name: cloudnative-pg
  policyTypes:
  - Ingress
  ingress:
  - from:
    # API server runs on control plane nodes
    - namespaceSelector: {}
      podSelector: {}
    ports:
    - port: 9443
      protocol: TCP
